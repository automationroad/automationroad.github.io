<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[zabbix3.4.11部署]]></title>
    <url>%2F2018%2F08%2F18%2Fzabbix3-4%2F</url>
    <content type="text"><![CDATA[centos7下安装zabbix3.4.11服务端和客户端安装前注意 SELinux和防火墙检查1234567#临时关闭selinuxsetenforce 1#永久关闭selinuxsed -i "s/SELINUX=enforcing/SELINUX=disabled/g" /etc/selinux/config#关闭防火墙和开机不启动（生产环境慎用，可以选择开放对应的端口）systemctl stop firewalld.servicesystemctl disable firewalld.service 1.安装MySQL5.712345678910111213141516171819202122232425262728#引入mysql源wget &lt;https://dev.mysql.com/get/mysql80-community-release-el7-1.noarch.rpm#安装mysql源rpm -ivh mysql80-community-release-el7-1.noarch.rpm#源包管理工具yum -y install yum-utils#关闭默认安装的mysql8yum-config-manager --disable mysql80-community#启用安装mysql5.7yum-config-manager --enable mysql57-community#安装mysql5.7yum install mysql-community-server -y#启动mysql5.7systemctl start mysqld.service#查看临时密码grep 'temporary password' /var/log/mysqld.log | awk -F '[:]' '&#123;print $4&#125;' | sed 's/ //g'#设置新的密码（修改临时密码）#方法1进入mysql控制台修改#进入mysql交互工具mysql -uroot -ptemp_passwd#修改密码ALTER USER 'root'@'localhost' IDENTIFIED BY 'new_passwd';#方法2，命令行修改密码mysqladmin -uroot -ptemp_passwd password new_passwd#设置用户 root 只可以在本地被访问mysql -uroot -pnew_passwd -e "grant all privileges on *.* to root@"localhost" identified by "new_passwd";" #刷新mysql -uroot -pnew_passwd -e "flush privileges;" 2.安装zabbix3.4安装zabbix服务端12345678910111213141516171819202122232425262728#引入zabbix源rpm -ivh &lt;http://repo.zabbix.com/zabbix/3.4/rhel/7/x86_64/zabbix-release-3.4-2.el7.noarch.rpm#安装zabbix服务端yum -y install zabbix-server-mysql zabbix-web-mysql#创建数据库zabbix及其用户mysql -uroot -pnew_passwd -e 'create database zabbix character set utf8 collate utf8_bin;'#授权mysql -uroot -pnew_passwd -e 'grant all privileges on zabbix.* to zabbix@localhost identified by "Zabbix1!";'#导入zabbix需要的表zcat /usr/share/doc/zabbix-server-mysql-*/create.sql.gz | mysql -uzabbix -pZabbix1! zabbix#配置zabbixserver连接mysqlsed -i.ori '126a DBPassword=Zabbix1!' /etc/zabbix/zabbix_server.conf#添加时区sed -i.ori '18a php_value date.timezone Asia/Shanghai' /etc/httpd/conf.d/zabbix.conf#解决图形列表下中文乱码yum -y install wqy-microhei-fontsmv /usr/share/fonts/dejavu/DejaVuSans.ttf /usr/share/fonts/dejavu/DejaVuSans.ttf.bakcp -f /usr/share/fonts/wqy-microhei/wqy-microhei.ttc /usr/share/fonts/dejavu/DejaVuSans.ttf#启动服务zabbixserver和httpsystemctl start zabbix-serversystemctl start httpd#写入开机自启动chmod +x /etc/rc.d/rc.localcat &gt;&gt;/etc/rc.d/rc.local&lt;&lt;EOFsystemctl start mysqld.servicesystemctl start httpdsystemctl start zabbix-serverEOF zabbix客户端部署12345678#安装zabbix客户端，如果是在zabbix服务端下直接安装，在被监控端需要先引入与服务端相同zabbix源yum -y install zabbix-agent zabbix-get#客户端配置sed -i '97c Server=192.168.1.162' /etc/zabbix/zabbix_agentd.confsed -i '138c ServerActive=192.168.1.162' /etc/zabbix/zabbix_agentd.confsed -i '149c Hostname=hjzabbix' /etc/zabbix/zabbix_agentd.confsystemctl start zabbix-agent.serviceecho "systemctl start zabbix-agent.service" &gt;&gt; /etc/rc.d/rc.local 浏览器访问12#得到访问地址echo "浏览器访问 [http://`hostname](http://%60hostname/) -I | awk '&#123;print $1&#125;'`/zabbix" 登录： Admin 密码：zabbix]]></content>
      <categories>
        <category>zabbix系列</category>
      </categories>
      <tags>
        <tag>监控</tag>
        <tag>自动化</tag>
      </tags>
  </entry>
</search>
